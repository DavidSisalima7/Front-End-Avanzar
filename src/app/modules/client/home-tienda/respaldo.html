<div class="flex flex-col flex-auto min-w-0">
    <!-- Main -->
    <div
        class="flex flex-auto justify-center w-full max-w-5xl mx-auto p-6 sm:p-8"
    >
        <!-- Column -->
        <div class="flex flex-col items-start">
            <ng-container *ngIf="publicaciones$ | async as publicaciones">
                <ng-container
                    *ngIf="publicaciones.length > 0; else noPublicaciones"
                >
                    <ng-container
                        *ngFor="
                            let publicacion of publicaciones;
                            trackBy: trackByFn
                        "
                    >
                        <!-- Post 3 -->
                        <fuse-card
                            class="flex flex-col max-w-140 w-full mt-8"
                            #expandableCard01="fuseCard"
                        >
                            <div
                                class="flex items-center mx-6 sm:mx-8 mt-6 mb-4"
                            >
                                <img
                                    class="w-10 h-10 rounded-full mr-4"
                                    *ngIf="publicacion.vendedor.usuario.avatar"
                                    [src]="publicacion.vendedor.usuario.avatar"
                                    alt="Card cover image"
                                />
                                <div class="flex flex-col">
                                    <span class="font-semibold leading-none">{{
                                        publicacion.vendedor.usuario.name
                                    }}</span>
                                    <span
                                        class="text-sm text-secondary leading-none mt-1"
                                        >{{
                                            publicacion.tiempoTranscurrido
                                        }}</span
                                    >
                                </div>
                                <button
                                    class="ml-auto -mr-4"
                                    mat-icon-button
                                    [matMenuTriggerFor]="postCardMenu04"
                                >
                                    <mat-icon
                                        class="icon-size-5"
                                        [svgIcon]="
                                            'heroicons_solid:ellipsis-vertical'
                                        "
                                    ></mat-icon>
                                </button>
                                <mat-menu #postCardMenu04="matMenu">
                                    <button mat-menu-item>
                                        <span class="flex items-center">
                                            <mat-icon
                                                class="icon-size-5 mr-3"
                                                [svgIcon]="
                                                    'heroicons_solid:arrow-up-tray'
                                                "
                                            ></mat-icon>
                                            <span>Save post</span>
                                        </span>
                                    </button>
                                    <button mat-menu-item>
                                        <span class="flex items-center">
                                            <mat-icon
                                                class="icon-size-5 mr-3"
                                                [svgIcon]="
                                                    'heroicons_solid:eye-slash'
                                                "
                                            ></mat-icon>
                                            <span>Hide post</span>
                                        </span>
                                    </button>
                                    <button mat-menu-item>
                                        <span class="flex items-center">
                                            <mat-icon
                                                class="icon-size-5 mr-3"
                                                [svgIcon]="
                                                    'heroicons_solid:clock'
                                                "
                                            ></mat-icon>
                                            <span>Snooze for 30 days</span>
                                        </span>
                                    </button>
                                    <button mat-menu-item>
                                        <span class="flex items-center">
                                            <mat-icon
                                                class="icon-size-5 mr-3"
                                                [svgIcon]="
                                                    'heroicons_solid:minus-circle'
                                                "
                                            ></mat-icon>
                                            <span>Hide all</span>
                                        </span>
                                    </button>
                                    <mat-divider class="my-2"></mat-divider>
                                    <button mat-menu-item>
                                        <span class="flex items-center">
                                            <mat-icon
                                                class="icon-size-5 mr-3"
                                                [svgIcon]="
                                                    'heroicons_solid:exclamation-triangle'
                                                "
                                            ></mat-icon>
                                            <span>Report post</span>
                                        </span>
                                    </button>
                                    <button mat-menu-item>
                                        <span class="flex items-center">
                                            <mat-icon
                                                class="icon-size-5 mr-3"
                                                [svgIcon]="
                                                    'heroicons_solid:bell'
                                                "
                                            ></mat-icon>
                                            <span
                                                >Turn on notifications for this
                                                post</span
                                            >
                                        </span>
                                    </button>
                                </mat-menu>
                            </div>
                            <div class="mx-6 sm:mx-8 mt-2 mb-6">
                                {{ publicacion.descripcionPublicacion }}
                            </div>
                            <div class="flex mx-6 sm:mx-8 mb-4">
                                <ng-container
                                    *ngFor="
                                        let imagenUrl of publicacion.imagenes;
                                        let i = index
                                    "
                                >
                                    <img
                                        class="rounded object-cover"
                                        [src]="imagenUrl"
                                        [alt]="'Imagen ' + (i + 1)"
                                    />
                                </ng-container>
                            </div>
                            <div class="flex items-center mx-3 sm:mx-5">
                                <button class="px-3 mr-1" mat-button>
                                    <mat-icon
                                        class="icon-size-5 text-red-500"
                                        [svgIcon]="'heroicons_solid:heart'"
                                    ></mat-icon>
                                    <span class="ml-2">Unlike</span>
                                </button>
                                <button class="px-3 mr-1" mat-button>
                                    <mat-icon
                                        class="icon-size-5"
                                        [svgIcon]="
                                            'heroicons_solid:chat-bubble-left-ellipsis'
                                        "
                                    ></mat-icon>
                                    <span class="ml-2">Comment</span>
                                </button>
                                <button class="px-3 mr-1" mat-button>
                                    <mat-icon
                                        class="icon-size-5"
                                        [svgIcon]="'heroicons_solid:share'"
                                    ></mat-icon>
                                    <span class="ml-2">Share</span>
                                </button>
                            </div>
                            <hr class="border-b mx-6 sm:mx-8 mt-4 mb-6" />
                            <div
                                class="flex flex-col sm:flex-row sm:items-center mx-6 sm:mx-8 mb-4 sm:mb-6"
                            >
                                <div class="flex items-center">
                                    <img
                                        class="w-6 h-6 m-0.5 rounded-full text-card ring-2 ring-white"
                                        src="assets/images/avatars/female-02.jpg"
                                        alt="Card cover image"
                                    />
                                    <img
                                        class="w-6 h-6 m-0.5 rounded-full -ml-3 text-card ring-2 ring-white"
                                        src="assets/images/avatars/female-04.jpg"
                                        alt="Card cover image"
                                    />
                                    <img
                                        class="w-6 h-6 m-0.5 rounded-full -ml-3 text-card ring-2 ring-white"
                                        src="assets/images/avatars/male-09.jpg"
                                        alt="Card cover image"
                                    />
                                    <img
                                        class="w-6 h-6 m-0.5 rounded-full -ml-3 text-card ring-2 ring-white"
                                        src="assets/images/avatars/male-07.jpg"
                                        alt="Card cover image"
                                    />
                                    <div class="text-md tracking-tight ml-3">
                                        You and 24 more liked this
                                    </div>
                                </div>
                                <div class="hidden sm:flex flex-auto"></div>
                                <div class="flex items-center mt-4 sm:mt-0">
                                    <button class="px-3 sm:-mr-3" mat-button>
                                        Sin comentarios
                                    </button>
                                </div>
                                <div class="flex items-center">
                                    <button
                                        class="px-3"
                                        mat-button
                                        [color]="'primary'"
                                        (click)="
                                            expandableCard01.expanded =
                                                !expandableCard01.expanded
                                        "
                                    >
                                        <span class="mr-1">Detalles</span>
                                        <mat-icon
                                            class="icon-size-5 transition-transform ease-in-out duration-150 rotate-0"
                                            [ngClass]="{
                                                'rotate-180':
                                                    expandableCard01.expanded
                                            }"
                                            [svgIcon]="
                                                'heroicons_mini:chevron-down'
                                            "
                                        ></mat-icon>
                                    </button>
                                </div>
                            </div>

                            <ng-container fuseCardExpansion>
                                <div class="m-8 mt-0">
                                    <div class="flex items-baseline">
                                        <div class="text-2xl font-semibold mt-2">USD</div>
                                        <div
                                            class="text-2xl font-semibold mt-2"
                                        >
                                        <span matSuffix>$</span>
                                            <ng-container
                                                *ngIf="
                                                    publicacion.productos;
                                                    else servicioTemplate
                                                "
                                            >
                                                {{
                                                    publicacion.productos
                                                        .precioProducto
                                                }}
                                            </ng-container>
                                            <ng-template #servicioTemplate>
                                                {{
                                                    publicacion.servicios
                                                        .precioServicio ||
                                                        "Precio no disponible"
                                                }}
                                            </ng-template>
                                        </div>
                                    </div>



                                    
                                    <div class="flex items-baseline mt-1">
                                        <div class="mr-2">Disponibles:</div>
                                        <div class="text-secondary">
                                            <ng-container
                                                *ngIf="
                                                    publicacion.productos;
                                                    else servicioTemplates
                                                "
                                            >
                                                <div
                                                    class="hidden lg:flex items-center"
                                                >
                                                    <div class="min-w-4">
                                                        {{
                                                            publicacion
                                                                .productos
                                                                .cantidadDisponible
                                                        }}
                                                    </div>
                                                    <div
                                                        class="flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden"
                                                        *ngIf="
                                                            publicacion
                                                                .productos
                                                                .cantidadDisponible <
                                                            20
                                                        "
                                                    >
                                                        <div
                                                            class="flex w-full h-1/3 bg-red-600"
                                                        ></div>
                                                    </div>

                                                    <div
                                                        class="flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden"
                                                        *ngIf="
                                                            publicacion
                                                                .productos
                                                                .cantidadDisponible >=
                                                                20 &&
                                                            publicacion
                                                                .productos
                                                                .cantidadDisponible <
                                                                30
                                                        "
                                                    >
                                                        <div
                                                            class="flex w-full h-2/4 bg-orange-400"
                                                        ></div>
                                                    </div>
                                                    <!-- High stock -->
                                                    <div
                                                        class="flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden"
                                                        *ngIf="
                                                            publicacion
                                                                .productos
                                                                .cantidadDisponible >=
                                                            30
                                                        "
                                                    >
                                                        <div
                                                            class="flex w-full h-full bg-green-400"
                                                        ></div>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <ng-template #servicioTemplates>
                                                <div
                                                    class="hidden lg:flex items-center"
                                                >
                                                    <div class="min-w-4">
                                                        {{
                                                            publicacion
                                                                .servicios
                                                                .cantidadDisponible
                                                        }}
                                                    </div>
                                                    <div
                                                        class="flex items-end ml-2 w-1 h-4 bg-red-200 rounded overflow-hidden"
                                                        *ngIf="
                                                            publicacion
                                                                .servicios
                                                                .cantidadDisponible <
                                                            20
                                                        "
                                                    >
                                                        <div
                                                            class="flex w-full h-1/3 bg-red-600"
                                                        ></div>
                                                    </div>

                                                    <div
                                                        class="flex items-end ml-2 w-1 h-4 bg-orange-200 rounded overflow-hidden"
                                                        *ngIf="
                                                            publicacion
                                                                .servicios
                                                                .cantidadDisponible >=
                                                                20 &&
                                                            publicacion
                                                                .servicios
                                                                .cantidadDisponible <
                                                                30
                                                        "
                                                    >
                                                        <div
                                                            class="flex w-full h-2/4 bg-orange-400"
                                                        ></div>
                                                    </div>
                                                    <!-- High stock -->
                                                    <div
                                                        class="flex items-end ml-2 w-1 h-4 bg-green-100 rounded overflow-hidden"
                                                        *ngIf="
                                                            publicacion
                                                                .servicios
                                                                .cantidadDisponible >=
                                                            30
                                                        "
                                                    >
                                                        <div
                                                            class="flex w-full h-full bg-green-400"
                                                        ></div>
                                                    </div>
                                                </div>
                                            </ng-template>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                        </fuse-card>
                    </ng-container>
                </ng-container>
            </ng-container>
        </div>
    </div>
</div>
